<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Object ID"><title>opendal::docs::rfcs::rfc_0293_object_id - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-bf502f66ec635d5d.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="opendal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.0-nightly (e51e98dde 2023-12-31)" data-channel="nightly" data-search-js="search-c17e98913a53b3b7.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../static.files/main-0b2e2def73e61cbe.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../../../opendal/index.html"><img src="https://raw.githubusercontent.com/apache/opendal/main/website/static/img/logo.svg" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../../opendal/index.html"><img src="https://raw.githubusercontent.com/apache/opendal/main/website/static/img/logo.svg" alt="logo"></a><h2><a href="../../../../opendal/index.html">opendal</a><span class="version">0.45.1</span></h2></div><h2 class="location"><a href="#">Module rfc_0293_object_id</a></h2><div class="sidebar-elems"><h2><a href="../index.html">In opendal::docs::rfcs</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../../../opendal/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../../index.html">opendal</a>::<wbr><a href="../../index.html">docs</a>::<wbr><a href="../index.html">rfcs</a>::<wbr><a class="mod" href="#">rfc_0293_object_id</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../../src/opendal/docs/rfcs/mod.rs.html#66">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><span class="item-info"><div class="stab portability">Available on <strong><code>docs</code></strong> only.</div></span><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Object ID</p>
<ul>
<li>Proposal Name: <code>object_id</code></li>
<li>Start Date: 2022-05-27</li>
<li>RFC PR: <a href="https://github.com/apache/opendal/pull/293">apache/opendal#293</a></li>
<li>Tracking Issue: <a href="https://github.com/apache/opendal/issues/294">apache/opendal#294</a></li>
</ul>
<h2 id="summary"><a href="#summary">Summary</a></h2>
<p>Allow getting id from an object.</p>
<h2 id="motivation"><a href="#motivation">Motivation</a></h2>
<p>Allow get id from an object will make it possible to operate across different operators. Users can store objects’ IDs locally and refer to them with different settings. This proposal will make tasks like backup, restore, and migration possible.</p>
<h2 id="guide-level-explanation"><a href="#guide-level-explanation">Guide-level explanation</a></h2>
<p>Users can fetch an object id via:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>o = op.object(<span class="string">"test_object"</span>);
<span class="kw">let </span>id = o.id();</code></pre></div>
<p>The id is unique and permanent inside the underlying storage.</p>
<p>For example, if we have an s3 bucket with the root <code>/workdir/</code>, the object’s id <code>test_object</code> will be <code>/workdir/test_object</code>.</p>
<h2 id="reference-level-explanation"><a href="#reference-level-explanation">Reference-level explanation</a></h2>
<p><code>id()</code> and <code>path()</code> will be added as functions of <code>object</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">impl </span>Object {
    <span class="kw">pub fn </span>id(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; String {}
    <span class="kw">pub fn </span>path(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; String {}
}</code></pre></div>
<ul>
<li><code>path</code> is a re-export of call to <code>Metadata::path()</code>.</li>
<li><code>id</code> will be generated by Operator’s root and <code>Metadata::path()</code>.</li>
</ul>
<h2 id="drawbacks"><a href="#drawbacks">Drawbacks</a></h2>
<p>None</p>
<h2 id="rationale-and-alternatives"><a href="#rationale-and-alternatives">Rationale and alternatives</a></h2><h3 id="why-not-add-a-new-field-in-metadata"><a href="#why-not-add-a-new-field-in-metadata">Why not add a new field in <code>Metadata</code>?</a></h3>
<p>Adding a new field inside <code>Metadata</code> requires every service to handle the id separately. And every metadata will need to store a complete id with the operators’ root.</p>
<h3 id="why-not-provide-a-full-uri-like-s3pathtoobject"><a href="#why-not-provide-a-full-uri-like-s3pathtoobject">Why not provide a full URI like <code>s3://path/to/object</code>?</a></h3>
<p>Because we can’t.</p>
<p>A full and functional URI towards an object will need the operator’s endpoint and credentials. It’s better to provide the mechanism and allow users to construct them based on their own business.</p>
<h2 id="prior-art"><a href="#prior-art">Prior art</a></h2>
<p>None</p>
<h2 id="unresolved-questions"><a href="#unresolved-questions">Unresolved questions</a></h2>
<p>None</p>
<h2 id="future-possibilities"><a href="#future-possibilities">Future possibilities</a></h2>
<p>None</p>
</div></details></section></div></main></body></html>